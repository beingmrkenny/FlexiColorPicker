(function(k,p,n){function x(a){if(k.event&&k.event.contentOverflow!==n)return{x:k.event.offsetX,y:k.event.offsetY};if(a.offsetX!==n&&a.offsetY!==n)return{x:a.offsetX,y:a.offsetY};var b=a.target.parentNode.parentNode;return{x:a.layerX-b.offsetLeft,y:a.layerY-b.offsetTop}}function e(a,b,c){a=p.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)a.setAttribute(d,b[d]);"[object Array]"!=Object.prototype.toString.call(c)&&(c=[c]);b=0;for(d=c[0]&&c.length||0;b<d;b++)a.appendChild(c[b]);return a}
function l(a){var b,c,d,g,f=a.h%360/60;g=a.v*a.s;d=g*(1-Math.abs(f%2-1));b=c=a=a.v-g;f=~~f;b+=[g,d,0,0,d,g][f];c+=[d,g,g,d,0,0][f];a+=[0,0,d,g,g,d][f];d=Math.floor(255*b);c=Math.floor(255*c);a=Math.floor(255*a);return{r:d,g:c,b:a,hex:"#"+(16777216|a|c<<8|d<<16).toString(16).slice(1)}}function q(a){var b=a.r,c=a.g,d=a.b;if(1<a.r||1<a.g||1<a.b)b/=255,c/=255,d/=255;var g;a=Math.max(b,c,d);g=a-Math.min(b,c,d);return{h:(0==g?0:a==b?(c-d)/g+(c<d?6:0):a==c?(d-b)/g+2:(b-c)/g+4)%6*60,s:0==g?0:g/a,v:a}}function y(a,
b,c){return function(d){d=d||k.event;d=x(d);a.h=b.offsetHeight>b.offsetWidth?d.y/b.offsetHeight*360+15:d.x/b.offsetWidth*360+15;var g=l({h:a.h,s:1,v:1}),f=l({h:a.h,s:a.s,v:a.v});c.style.backgroundColor=g.hex;a.callback&&a.callback(f.hex,{h:a.h-15,s:a.s,v:a.v},{r:f.r,g:f.g,b:f.b},n,d)}}function z(a,b){return function(c){c=c||k.event;c=x(c);var d=b.offsetHeight;a.s=c.x/b.offsetWidth;a.v=(d-c.y)/d;d=l(a);a.callback&&a.callback(d.hex,{h:a.h-15,s:a.s,v:a.v},{r:d.r,g:d.g,b:d.b},c)}}function h(a,b,c){if(!(this instanceof
h))return new h(a,b,c);this.h=0;this.v=this.s=1;if(c)this.callback=c,this.pickerElement=b,this.slideElement=a;else{a.innerHTML='<div class="picker-wrapper"><div class="picker"></div><div class="picker-indicator"></div></div><div class="slide-wrapper"><div class="slide"></div><div class="slide-indicator"></div></div>';this.slideElement=a.getElementsByClassName("slide")[0];this.pickerElement=a.getElementsByClassName("picker")[0];var d=a.getElementsByClassName("slide-indicator")[0],g=a.getElementsByClassName("picker-indicator")[0];
h.fixIndicators(d,g);this.callback=function(a,c,e,f,k){h.positionIndicators(d,g,k,f);b(a,c,e)}}if("SVG"==v){a=r.cloneNode(!0);c=t.cloneNode(!0);var f=a.getElementsByTagName("linearGradient")[0],e=a.getElementsByTagName("rect")[0];f.id="gradient-hsv-"+u;e.setAttribute("fill","url(#"+f.id+")");this.slideElement.offsetHeight>this.slideElement.offsetWidth?(f.setAttribute("x1","0%"),f.setAttribute("y1","100%")):(f.setAttribute("x1","100%"),f.setAttribute("y1","0%"));f=[c.getElementsByTagName("linearGradient")[0],
c.getElementsByTagName("linearGradient")[1]];e=c.getElementsByTagName("rect");f[0].id="gradient-black-"+u;f[1].id="gradient-white-"+u;e[0].setAttribute("fill","url(#"+f[1].id+")");e[1].setAttribute("fill","url(#"+f[0].id+")");this.slideElement.appendChild(a);this.pickerElement.appendChild(c);u++}else this.slideElement.innerHTML=r,this.pickerElement.innerHTML=t;m(this.slideElement,"click",y(this,this.slideElement,this.pickerElement));m(this.pickerElement,"click",z(this,this.pickerElement));A(this,
this.slideElement,y(this,this.slideElement,this.pickerElement));A(this,this.pickerElement,z(this,this.pickerElement))}function m(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function A(a,b,c){var d=!1;m(b,"mousedown",function(a){d=!0});m(b,"mouseup",function(a){d=!1});m(b,"mouseout",function(a){d=!1});m(b,"mousemove",function(a){d&&c(a)})}function w(a,b,c,d){a.h=b.h%360;a.s=b.s;a.v=b.v;b=l(a);var e;e=a.slideElement.offsetHeight>a.slideElement.offsetWidth?
{y:a.h*a.slideElement.offsetHeight/360,x:0}:{x:a.h*a.slideElement.offsetWidth/360,y:0};var f=a.pickerElement.offsetHeight,f={x:a.s*a.pickerElement.offsetWidth,y:f-a.v*f};a.pickerElement.style.backgroundColor=l({h:a.h,s:1,v:1}).hex;a.callback&&a.callback(d||b.hex,{h:a.h,s:a.s,v:a.v},c||{r:b.r,g:b.g,b:b.b},f,e);return a}var v=k.SVGAngle||p.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",t,r;"SVG"==v?(r=e("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",
width:"100%",height:"100%"},[e("defs",{},e("linearGradient",{id:"gradient-hsv",x1:"",y1:"",x2:"0%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),e("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),e("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),e("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),e("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),e("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),
e("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),e("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),t=e("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[e("defs",{},[e("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#000000",
"stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),e("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==v&&(r='<DIV style="position: relative; width: 100%; height: 100%"><v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t"><v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill></v:rect></DIV>',
t='<DIV style="position: relative; width: 100%; height: 100%"><v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t"><v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill></v:rect><v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t"><v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill></v:rect></DIV>',
p.namespaces.v||p.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var u=0;h.hsv2rgb=function(a){a=l(a);delete a.hex;return a};h.hsv2hex=function(a){return l(a).hex};h.rgb2hsv=q;h.rgb2hex=function(a){return l(q(a)).hex};h.hex2hsv=function(a){return q(h.hex2rgb(a))};h.hex2rgb=function(a){return{r:parseInt(a.substr(1,2),16),g:parseInt(a.substr(3,2),16),b:parseInt(a.substr(5,2),16)}};h.prototype.setHsv=function(a){return w(this,a)};h.prototype.setRgb=function(a){return w(this,q(a),
a)};h.prototype.setHex=function(a){return w(this,h.hex2hsv(a),n,a)};h.positionIndicators=function(a,b,c,d){c&&(a.offsetHeight>a.offsetWidth?a.style.top=c.y-a.offsetHeight/2+"px":a.style.left=c.x-a.offsetWidth/2+"px");d&&(b.style.top=d.y-b.offsetHeight/2+"px",b.style.left=d.x-b.offsetWidth/2+"px")};h.fixIndicators=function(a,b){b.style.pointerEvents="none";a.style.pointerEvents="none"};k.ColorPicker=h})(window,window.document);
